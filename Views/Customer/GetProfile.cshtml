@model PetSitter.ViewModels.CustomerVM

@{
    ViewData["Title"] = "GetProfile";
}


<div class="getprofile-container">
    <div class="profile-wrapper">
        <h2>Hello @Html.DisplayFor(model => model.FirstName)!</h2>
        <h3>
            Explore your profile and click
            <a asp-action="EditProfile" asp-route-id="@Model.CustomerId">
                <span class="material-symbols-outlined">
                    account_box
                </span>
            </a>
            this to add your pet to get service or edit your detail!
        </h3>
    </div>

    <hr class="mt-4" />

    @{

        IEnumerable<User> users = ViewData["UserData"] as IEnumerable<User>;
    }

    <div class="profile-container">
        <dl class="row">
            <dd class="col-sm-10">
                @foreach (User user in users)
                {
                    if (user.ProfileImage == null)
                    {
                        <p>No Profile Image Given, go edit profile link add your new Profile Image!</p>
                    }
                    else
                    {
                        <div class="d-flex align-items-center w-100">
                            <img style="max-width: 400px;" src="data:image/png;base64,
                            @Convert.ToBase64String(user.ProfileImage)" alt="User Profile Image" />
                            <div>
                                <h3 class="text-decoration-underline">PROFILE BIO</h3>
                                <p>This is the first photo pet owners will see. We recommend using a well-lit, clear photo of your face (without sunglasses).</p>
                            </div>
                        </div>
                    }
                }

            </dd>
            <h3>CONTACT DETAILS</h3>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.FirstName)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.FirstName)
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.LastName)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.LastName)
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.Email)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Email)
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.PhoneNumber)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.PhoneNumber)
            </dd>
        </dl>
        <dl class="row">
            <h3>POSTAL ADDRESS</h3>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.City)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.City)
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.PostalCode)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.PostalCode)
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.StreetAddress)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.StreetAddress)
            </dd>
        </dl>


        @{

            IEnumerable<Pet> pets = ViewData["PetLists"] as IEnumerable<Pet>;
        }
        <h3>YOUR PETS</h3>
        <table class="table">
            <tr>
                <th>Name</th>
            </tr>
            @foreach (Pet pet in pets)
            {
                <tr class="pet-lists">
                    <td class="d-flex justify-content-between">
                        @if(@pet.PetType == "Dog"){
                            <div>
                                <i class="fa-solid fa-dog"></i>
                                <a asp-action="GetPet" asp-route-id="@pet.PetId" class="text-decoration-none text-black">@pet.Name</a>
                            </div>
                        }
                        else
                        {
                            <div>
                                <i class="fa-solid fa-cat"></i>
                                <a asp-action="GetPet" asp-route-id="@pet.PetId" class="text-decoration-none text-black">@pet.Name</a>
                            </div>
                        }
                        <div>
                            <a asp-action="EditPet" asp-route-id="@pet.PetId">
                                <span class="material-symbols-outlined edit">edit</span>
                            </a>
                            <a class="btn-delete" data-id="@pet.PetId" data-controller="Customer" data-action="DeletePet" data-body-message="Are you sure to delete this pet?">
                                <span class="material-symbols-outlined delete">delete</span>
                            </a>
                        </div>
                    </td>
                </tr>
            }
        </table>
    </div>
</div>



